
def Dirac[a](x:a):Distribution[a]{ // TODO: make built-in
	return infer(()=>x);
}

def main(){
	k := if Bernoulli(1/2) { infer } else { [a](f:ğŸ™ â†’ a)=>Dirac(f()) };
	return k(()=>Bernoulli(1/2)); // expected: Î´_râ‚[Î»Î¾â‚. Î´_Î¾â‚[{.val â†¦ 0,.tag â†¦ 1}]]Â·â…Ÿ4+Î´_râ‚[Î»Î¾â‚. Î´_Î¾â‚[{.val â†¦ 0,.tag â†¦ 1}]Â·â…Ÿ2+Î´_Î¾â‚[{.val â†¦ 1,.tag â†¦ 1}]Â·â…Ÿ2]Â·â…Ÿ2+Î´_râ‚[Î»Î¾â‚. Î´_Î¾â‚[{.val â†¦ 1,.tag â†¦ 1}]]Â·â…Ÿ4
}

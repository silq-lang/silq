// args: --run

def flatten[Ï„,n:!â„•,m:!â„•](tuple:(Ï„^n)^m)mfree:Ï„^(n*m){
	if m==0{
		() := tuple coerce Ï„^0;
		ret := () coerce Ï„^(n*m);
	} else {
		(head,)~tail := tuple;
		tail := flatten[Ï„,n,m sub 1](tail);
		ret := head~tail coerce Ï„^(n*m);
	}
	return ret;
}

def main(){
	x:=[[true,true],[false,false]] coerce (ğ”¹^2)^2;
	y:=flatten(x);
	x:=reverse(flatten[ğ”¹,2,2])(y);
	assert(measure(x==(((1,1),(0,0)):(ğ”¹^2)^2)));
	return x;
}

// args: --unsafe-capture-const --run
def builder[n:!â„•](array: int[n]^n)lifted{
    def f(function: int[n] !â†’ lifted ğ”¹, i: int[n])lifted {
        return function(array[i]);
    }
    return f;
}

def main(){
	x:=(0:int[2],1:int[2]);
	f:=builder(x);
	assert(measure(f((x:int[2])liftedâ‡’x[0],0:int[2])==0));
}

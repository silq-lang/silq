// args: --run

def expand[n: !â„•](x: uint[n]) qfree: uint[2*n] {
    vâ‚€ := 0 as uint[n];
    return ((x as ğ”¹^n) ~ (vâ‚€ as ğ”¹^n)) as uint[2*n];
}

def identity_but_slower(x: uint[1]) qfree {
    expand[1](y) := expand[1](x);
    return y;
}

def main() {
    a := 1: uint[1];
    q := H(0: ğ”¹);
    if q {
        a := identity_but_slower(a);
    }
    q := H(q);
    measure(q);
    return a;
}

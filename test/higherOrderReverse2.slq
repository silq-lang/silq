// args: --run

def foo(f: const ğ”¹ Ã— const ğ”¹ Ã— ğ”¹ !â†’mfree ğ”¹)(const x: ğ”¹, const y: ğ”¹, z: ğ”¹)mfree{
	f(x,y,z):=z;
	return z;
}

def bar(const x: ğ”¹, const y: ğ”¹, z: ğ”¹)mfree{
	if x { z:=X(z); }
	if y { z:=X(z); }
	return z;
}

def main(){
	x:=H(1:ğ”¹);
	y:=H(1:ğ”¹);
	z:=H(1:ğ”¹);
	z:=foo(bar)(x,y,z);
	x:=H(x);
	y:=H(y);
	z:=H(z);
	assert(measure(x,y,z)=(0,0,1));
}

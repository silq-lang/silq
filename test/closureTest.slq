// args: --run

def foo(c:!ğ”¹)mfree{
	x:=H(1:ğ”¹);
	def bar()mfreeâ‡’if c then (0,x) else (1,X(x));
	return bar;
}
def main(){
	c:=measure(H(0:ğ”¹));
	x:=H(0:ğ”¹);
	if x{
		(a,H(b)):=foo(c)();
	}else{
		b:=1:ğ”¹;
	}
	measure(b);
	(a,b):=(c,H(x));
	assert(measure(aâ‰ b));
	return (a,b);
}

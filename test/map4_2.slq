// args: --run

def map[a,b](const f:aâ†’mfree b)[n:!â„•](xs:a^n):b^n{
	ys:=();
	for i in 0..n{
		[x]~xs:=xs;
		ys:=ys~[f(x)];
	}
	():=xs;
	return ys coerce b^n;
}

def bit_encode[m:!â„•](x:ğ”¹):ğ”¹^m â‡’ vector(m sub 1,x)~[x];
def phase_encode[n:!â„•](x:ğ”¹):ğ”¹^n â‡’ map(H)(vector(n sub 1,x)~[x]);

def shor_encode(x:ğ”¹){
	x:=phase_encode[3](x);
	return map(bit_encode[3])(x);
}


def main()â‡’shor_encode(0);

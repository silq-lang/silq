
def Dirac[a](x:a):Distribution[a]{ // TODO: make built-in
	return infer(()=>x);
}

def main(){
	k := if flip(1/2) { infer } else { [a](f:ğŸ™ â†’ a)=>Dirac(f()) };
	return k(()=>flip(1/2)); // expected: 1/2Â·Î´(Î›Î¾â‚. 1/2Â·Î´(val(0))[Î¾â‚]+1/2Â·Î´(val(1))[Î¾â‚])[r]+1/4Â·Î´(Î›Î¾â‚. Î´(val(0))[Î¾â‚])[r]+1/4Â·Î´(Î›Î¾â‚. Î´(val(1))[Î¾â‚])[r]
}

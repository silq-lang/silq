
def makeIntegerComparator(value:!â„¤,geq:!ğ”¹)[n:!â„•](const state:ğ”¹^n,compare:ğ”¹):ğ”¹{
	if valueâ‰¤0{
		if geq{ compare:=X(compare); }
	}else if value<2^n{
		if n>1{
			twos:=2^n-value as !uint[n];
			def rec[n:!â„•](const state:ğ”¹^n,compare:ğ”¹,i:!â„•,const r:ğ”¹):ğ”¹{ // shadowing n
			//def rec(const state:ğ”¹^n,compare:ğ”¹,i:!â„•,const r:ğ”¹):ğ”¹{
				if i<n-1{
					nr:=if twos[i] then state[i]âˆ¨r else state[i]âˆ§r;
					return rec(state,compare,i+1,nr);
				}else{
					compareâŠ•=if twos[i] then state[i]âˆ¨r else state[i]âˆ§r;
					return compare;
				}
			}
			compare:=rec(state,compare,1,twos[0]âˆ§state[0]);
			if !geq{ compare:=X(compare); }
		}else{
			compareâŠ•=state[0];
			if !geq{ compare:=X(compare); }
		}
	}else{
		if !geq{ compare:=X(compare); }
	}
	return compare;
}

